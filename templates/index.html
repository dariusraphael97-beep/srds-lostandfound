{% extends "base.html" %}
{% block title %}SRDS Lost & Found â€” Home{% endblock %}

{% block content %}

<!-- HERO -->
<section class="hero" aria-labelledby="hero-heading">
  <div class="hero-bg"></div>
  <div class="particles"></div>
  <div class="hero-grid-overlay" aria-hidden="true"></div>

  <div class="hero-content container">
    <div>
      <div class="hero-eyebrow reveal">
        <span class="dot" aria-hidden="true"></span>
        Official School Portal
      </div>

      <h1 id="hero-heading" class="reveal reveal-delay-1">
        <span class="line-normal">Find What's</span>
        <span class="gradient italic">Lost.</span>
        <span class="line-normal">Return What's <span class="italic">Found.</span></span>
      </h1>

      <p class="hero-desc reveal reveal-delay-2">
        Saddle River Day School's official lost-and-found system.
        Report items you've found, search for your belongings,
        or submit a claim â€” all in one place.
      </p>

      <div class="hero-actions reveal reveal-delay-3">
        <a href="{{ url_for('items') }}" class="btn btn-primary">ğŸ” Browse Lost Items</a>
        <a href="{{ url_for('report') }}" class="btn btn-outline">ğŸ“‹ Report Found Item</a>
      </div>
    </div>

    <!-- Stats panel -->
    <div class="hero-panel reveal reveal-delay-2" aria-label="Site statistics">
      <div class="stat-grid">
        <div class="stat-box">
          <span class="stat-number" data-target="{{ total }}">0</span>
          <div class="stat-label">Items Listed</div>
        </div>
        <div class="stat-box">
          <span class="stat-number" data-target="{{ claimed }}">0</span>
          <div class="stat-label">Returned</div>
        </div>
      </div>
      <div class="stat-box" style="text-align:center;">
        <span class="stat-number" style="font-size:2rem;">24h</span>
        <div class="stat-label">Avg. Response Time</div>
      </div>

      <div class="search-hint" onclick="window.location.href='{{ url_for('items') }}'" role="button" tabindex="0" aria-label="Search items">
        <span class="search-icon">ğŸ”</span>
        <span>Search all itemsâ€¦</span>
        <kbd title="Keyboard shortcut">Ctrl K</kbd>
      </div>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="section" aria-labelledby="how-heading">
  <div class="container">
    <div class="section-heading reveal">
      <p class="eyebrow">Simple Process</p>
      <h2 id="how-heading">How It Works</h2>
      <div class="section-divider" aria-hidden="true"></div>
    </div>

    <div class="steps-grid">
      <div class="step-card reveal reveal-delay-1">
        <div class="step-number" aria-hidden="true">1</div>
        <h3>Found Something?</h3>
        <p>Fill out our simple form to report a found item. Upload a photo to help the owner recognize it instantly.</p>
      </div>
      <div class="step-card reveal reveal-delay-2">
        <div class="step-number" aria-hidden="true">2</div>
        <h3>Admin Reviews</h3>
        <p>School staff reviews every submission before it goes live, keeping the directory accurate and trustworthy.</p>
      </div>
      <div class="step-card reveal reveal-delay-3">
        <div class="step-number" aria-hidden="true">3</div>
        <h3>Search &amp; Find</h3>
        <p>Browse all listed items or search by keyword and category. Bookmark items you're watching.</p>
      </div>
      <div class="step-card reveal reveal-delay-4">
        <div class="step-number" aria-hidden="true">4</div>
        <h3>Claim Your Item</h3>
        <p>Spot your belonging? Submit a claim with your student ID â€” staff will verify and arrange pickup.</p>
      </div>
    </div>
  </div>
</section>

<!-- RECENT ITEMS -->
{% if recent %}
<section class="section" style="padding-top:0;" aria-labelledby="recent-heading">
  <div class="container">
    <div class="section-heading reveal">
      <p class="eyebrow">Just Added</p>
      <h2 id="recent-heading">Recently Found Items</h2>
      <div class="section-divider" aria-hidden="true"></div>
    </div>

    <div class="items-grid">
      {% for item in recent %}
      <article class="card reveal reveal-delay-{{ loop.index if loop.index <= 3 else 3 }}" role="listitem">
        <div class="card-img-wrap">
          {% if item.photo %}
            <img class="card-img" src="{{ url_for('static', filename='uploads/' + item.photo) }}" alt="Photo of {{ item.name }}" loading="lazy" />
          {% elif item.placeholder_url %}
            <img class="card-img" src="{{ item.placeholder_url }}" alt="Illustrative photo for {{ item.category }}" loading="lazy" />
          {% else %}
            <div class="card-img-placeholder" aria-label="No photo available">
              {{ item.emoji or 'ğŸ“¦' }}
            </div>
          {% endif %}
          <div class="card-img-overlay" aria-hidden="true"></div>
        </div>

        <div class="card-body">
          <span class="card-category">{{ item.category }}</span>
          <h3 class="card-title">{{ item.name }}</h3>
          <div class="card-meta">
            <span>ğŸ“ {{ item.location }}</span>
            <span>ğŸ“… {{ item.date_found }}</span>
          </div>
          <p style="font-size:0.85rem; color:var(--white-40); margin-bottom:16px; line-height:1.5;">
            {{ item.description[:80] }}{% if item.description|length > 80 %}â€¦{% endif %}
          </p>
          <div class="card-actions">
            <a href="{{ url_for('claim', item_id=item.id) }}" class="btn btn-primary btn-sm">Claim This</a>
            <button class="bookmark-btn" data-id="{{ item.id }}" aria-label="Bookmark this item" title="Save for later">ğŸ·ï¸</button>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <div class="reveal" style="text-align:center; margin-top:48px;">
      <a href="{{ url_for('items') }}" class="btn btn-glass">View All Items â†’</a>
    </div>
  </div>
</section>
{% endif %}

<!-- CTA -->
<section class="section-sm">
  <div class="container">
    <div class="cta-box reveal">
      <p class="eyebrow" style="color:var(--accent); font-size:0.72rem; font-weight:700; letter-spacing:0.2em; text-transform:uppercase; margin-bottom:14px;">Found Something at SRDS?</p>
      <h2 style="color:var(--white); margin-bottom:14px;">Help a Fellow Rebel Get Their Stuff Back</h2>
      <p style="color:var(--white-70); margin-bottom:32px; max-width:500px; margin-left:auto; margin-right:auto;">
        Takes less than 2 minutes to report. Your classmate will thank you.
      </p>
      <a href="{{ url_for('report') }}" class="btn btn-primary">Report a Found Item â†’</a>
    </div>
  </div>
</section>

{% endblock %}
